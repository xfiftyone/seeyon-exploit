# Output File Name
NAME=seeyoner
# Output File Location
DIR=output
$(shell mkdir -p ${DIR})

# Go build flags
LDFLAGS=-ldflags "-s -w"
# Go build file
GOFILE=main.go

default:
	go build ${LDFLAGS} -o ${DIR}/${NAME} ${GOFILE}

all: windows linux darwin

# Compile Server - Windows x64
windows:
	export GOOS=windows;export GOARCH=amd64;go build ${LDFLAGS} -o ${DIR}/${NAME}-Windows-x64.exe ${GOFILE}

# Compile Server - Linux x64
linux:
	export GOOS=linux;export GOARCH=amd64;go build ${LDFLAGS} -o ${DIR}/${NAME}-Linux-x64 ${GOFILE}

# Compile Server - Darwin x64
darwin:
	export GOOS=darwin;export GOARCH=amd64;go build ${LDFLAGS} -o ${DIR}/${NAME}-Darwin-x64 ${GOFILE}

# clean
clean:
	rm -rf ${DIR}